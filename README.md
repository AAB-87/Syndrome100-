# Счетчики покрытия
JaCoCo использует набор различных счетчиков для 
расчета показателей покрытия. Все эти счетчики 
выводятся из информации, содержащейся в файлах 
классов Java, которые в основном представляют собой
инструкции байтового кода Java и отладочную 
информацию, необязательно встроенную в файлы классов.
Такой подход позволяет оперативно оснащать и 
анализировать приложения, даже если исходный код 
недоступен. В большинстве случаев собранная 
информация может быть отображена обратно в исходный
код и визуализирована до уровня детализации на 
уровне строк. В любом случае у этого подхода есть 
ограничения. Файлы классов должны быть 
скомпилированы с отладочной информацией, чтобы 
рассчитать покрытие на уровне строк и обеспечить 
выделение источника. Не все конструкции языка Java
можно напрямую скомпилировать в соответствующий 
байтовый код. В таких случаях компилятор Java 
создает так называемые synthetic code, который 
иногда приводит к неожиданным результатам покрытия 
кода.

## INSTRUCTION

Этот пример требует общего охвата покрытия 80%, 
и ни один класс не должен быть пропущен.

Наименьшая единица отсчета JaCoCo - это инструкции
с одним байтовым кодом Java. Instruction coverage 
предоставляет информацию об объеме кода, который 
был выполнен или пропущен. Эта метрика полностью 
независима от исходного форматирования и всегда 
доступна, даже при отсутствии отладочной информации
в файлах классов.

## BRANCH

JaCoCo также вычисляет branch coverage для всех 
if и switch отчетности. Эта метрика подсчитывает 
общее количество таких ветвей в методе и определяет
количество выполненных или пропущенных ветвей. 
Покрытие веток всегда доступно, даже при отсутствии
отладочной информации в файлах классов. Обратите 
внимание, что обработка исключений не считается 
ветвями в контексте этого определения счетчика.

Если файлы классов были скомпилированы с отладочной
информацией, точки принятия решения могут быть 
сопоставлены с исходными строками и выделены 
соответствующим образом:

* Нет покрытия: нет ответвлений в линии
 (красный ромб);
* Частичное покрытие: выполнена только часть 
 ветвей в линии (желтый ромб);
* Полное покрытие: Все ответвления в линии
  выполнены (зеленый ромб).
  
## LINE

Вот пример, где используется исключение. В этом 
примере требуется минимум 50% покрытия строк для 
каждого класса, кроме тестовых классов.

Для всех файлов классов, которые были 
скомпилированы с отладочной информацией, можно 
рассчитать информацию о покрытии для отдельных 
строк. Исходная строка считается выполненной, 
если была выполнена хотя бы одна инструкция, 
назначенная этой строке.

В связи с тем, что одна строка обычно компилируется
в инструкции с многобайтовым кодом, выделение 
исходного кода показывает три разных состояния 
для каждой строки, содержащей исходный код:

* Нет покрытия: ни одна инструкция в строке не была
  выполнена(красный фон);
* Частичное покрытие: выполнена только часть 
  инструкции в строке (желтый фон);
* Полное покрытие: все инструкции в строке 
  выполнены (зеленый фон).

В зависимости от форматирования исходного кода одна
строка исходного кода может относиться к нескольким
методам или нескольким классам. Следовательно, 
количество строк методов нельзя просто добавить,
чтобы получить общее количество для содержащего 
класса. То же самое верно и для строк нескольких 
классов в одном исходном файле. JaCoCo вычисляет
покрытие строк для классов и исходного файла на 
основе фактически охваченных строк исходного кода.